<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Campus Gardens</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
   	<div class="map-container">
   		<div id="map"></div>
   		<div id="floating-panel">
			<p style="font-size: 11px;">visualize by</p>
   			<a class="by" onClick="javascript:byAcreage()">acreage</a><br>
   			<a class="by" onClick="javascript:bySizeOfHarvest()">size of harvest</a><br>
			<a class="by" onClick="javascript:byDistance()">distance</a>
   		</div>
   		<div id="sidebar" class="garden-info"><img src="img/sidebar.png"></div>
   		<div id="soga" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="blake" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="clark" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="golden" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="gill" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="casa" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="cloyne" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="botanical" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   		<div id="oxford" class="garden-info" style="visibility: hidden;"><img src="img/blake.png"></div>
   	</div>
    <div class="container text-center">
        <img class="on-scroll" src="img/on_scroll.png">
    </div>
    <script>
        var map;
		var circles = [];
		let gardenIds = ["sidebar", "soga", "blake", "clark", "golden", "gill", "casa", "cloyne", "botanical", "oxford"];
		let names = {"soga": "Student Organic Garden Association", 
				   "blake": "Blake Garden", "clark": "Clark Kerr Garden", 
				   "golden": "Golden Garden", "gill": "UC Gill Tract Community Farm", 
					"casa": "Casa Zimbabwe", "cloyne": "Cloyne Court Hotel", 
				   "botanical": "UC Botanical Garden", "oxford": "Oxford Tract"}
		var gardens = {
			SOGA: {
				name: "soga",
				center: {lat: 37.8767, lng: -122.2676},
				acreage: 1.5,
				sizeOfHarvest: 3,
				distance: 4
			},
			BlakeGarden: {
				name: "blake",
				center: {lat: 37.913539, lng: -122.284945},
				acreage: 4,
				sizeOfHarvest: 1,
				distance: 1,
				imgId: "blake"
			},
			ClarkCampus: {
				name: "clark",
				center: {lat: 37.8641918, lng: -122.2491377},
				acreage: 1,
				sizeOfHarvest: 3,
				distance: 3
			},
			GoldenGarden: {
				name: "golden",
				center: {lat: 37.864455, lng: -122.246180},
				acreage: 1.5,
				sizeOfHarvest: 1,
				distance: 1
			},
			UCGillTract: {
				name: "gill",
				center: {lat: 37.8864, lng: -122.2982},
				acreage: 2.5,
				sizeOfHarvest: 6,
				distance: 3
			},
			CasaZimbabwe: {
				name: "casa",
				center: {lat: 37.875759, lng: -122.261298},
				acreage: 1,
				sizeOfHarvest: 1,
				distance: 1
			},
			CloyneCourt: {
				name: "cloyne",
				center: {lat: 37.876127, lng: -122.258085},
				acreage: 1,
				sizeOfHarvest: 1,
				distance: 1
			},
			UCBotanicalGarden: {
				name: "botanical",
				center: {lat: 37.875163, lng: -122.238594},
				acreage: 5,
				sizeOfHarvest: 1,
				distance: 1
			},
			OxfordTract: {
				name: "oxford",
				center: {lat: 37.875372, lng: -122.267515},
				acreage: 1.5,
				sizeOfHarvest: 1,
				distance: 3
			}
		}
        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 37.8895033, lng: -122.2607468},
                zoom: 14,
				disableDefaultUI: true,
				scrollwheel: false,
				mapTypeId: 'satellite'
            });
			
			var CampusCoordinates = [
				{lat: 37.874071, lng: -122.266068},
				{lat: 37.870780, lng: -122.265554},
				{lat: 37.868820, lng: -122.266001},
				{lat: 37.867958, lng: -122.265604},
				{lat: 37.869761, lng: -122.252499},
				{lat: 37.871211, lng: -122.252946},
				{lat: 37.872034, lng: -122.253194},
				{lat: 37.873444, lng: -122.255229},
				{lat: 37.875364, lng: -122.256966},
				{lat: 37.874071, lng: -122.266068}
			];
			var Campus = new google.maps.Polygon({
				map: map,
				paths: CampusCoordinates,
				strokeColor: '#3b7ea1',
				strokeOpacity: 0.8,
				strokeWeight: 2,
				fillColor: '#3b7ea1',
				fillOpacity: 0.5
			});
			var campusInfoWindow = new google.maps.InfoWindow({
				content: 'UC Berkeley Campus',
				position: {lat: 37.871853, lng:  -122.258423}
			});
			
			google.maps.event.addListener(Campus, 'mouseover', function (event) {
				this.setOptions({
					strokeColor: '#003262',
					fillColor: '#003262'
				});
        		campusInfoWindow.open(map);
			});
			google.maps.event.addListener(Campus, 'mouseout', function (event) {
				this.setOptions({
					strokeColor: '#3b7ea1',
					fillColor: '#3b7ea1'
				});
        		campusInfoWindow.close();
			});
			
			//BUBBLES
			for (var garden in gardens) {
				var gardenCircle = new google.maps.Circle({
					name: gardens[garden].name,
					strokeColor: '#afdda4',
					strokeOpacity: 0.8,
					strokeWeight: 1,
					fillColor: '#afdda4',
					fillOpacity: 0.6,
					map: map,
					center: gardens[garden].center,
					radius: gardens[garden].acreage * 100
				});
				gardens[garden].circle = gardenCircle;
				var gardensInfoWindow = new google.maps.InfoWindow();

				google.maps.event.addListener(gardenCircle, 'mouseover', function (event) {
					this.setOptions({
						strokeOpacity: 1.0,
						fillOpacity: 0.8
					});
					gardensInfoWindow.setContent(names[this.name]);
					gardensInfoWindow.setPosition(this.center);
					gardensInfoWindow.open(map);
				});
				google.maps.event.addListener(gardenCircle, 'mouseout', function (event) {
					this.setOptions({
						strokeOpacity: 0.8,
						fillOpacity: 0.6
					});
					gardensInfoWindow.close();
				});
				google.maps.event.addListener(gardenCircle, 'click', function(marker, event) {
					hideInfos();
					document.getElementById(this.name).style.visibility = 'visible';
				});
			}
        }
		
		function hideInfos() {
			for (var id in gardenIds) {
				document.getElementById(gardenIds[id]).style.visibility = 'hidden';
			}
		}
		function byAcreage() {
			for (var garden in gardens) {
				var radius = gardens[garden].acreage * 100;
				gardens[garden].circle.setRadius(radius);
			}
		}
		function bySizeOfHarvest() {
			for (var garden in gardens) {
				var radius = gardens[garden].sizeOfHarvest * 100;
				gardens[garden].circle.setRadius(radius);
			}
		}
		function byDistance() {
			for (var garden in gardens) {
				var radius = gardens[garden].distance * 100;
				gardens[garden].circle.setRadius(radius);
			}
		}
		function campusHover(event) {
			var content = '<b>UC Berkeley Campus</b>';
			campusInfoWindow.setContent(content);
			campusInfoWindow.setPosition(event.latLng);
			campusInfoWindow.open(map);
		}
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBgWMmOaSJ4YT1BNWKrfnpR2vn-0ntfqhM&callback=initMap"
    async defer></script>
</body>
</html>